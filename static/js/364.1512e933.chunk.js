"use strict";(self.webpackChunkeditor_app=self.webpackChunkeditor_app||[]).push([[364],{13364:function(e,t,r){r.r(t),r.d(t,{default:function(){return Y}});var n,a=r(37762),s=r(4942),i=r(42982),o=r(15671),u=r(43144),c=r(74165),d=r(15861),f=r(42616),l=r(44803),h=r(99907),p=r(81955);(n="undefined"!=typeof window?window:void 0)&&(void 0===n.global&&(n.global=n),void 0===n.globalThis&&(n.globalThis=n),void 0===n.process&&(n.process={env:{NODE_ENV:"production"}}));var v,w=(0,p.g)((function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.safeDeploymentsL1ChainIds=e.safeDeploymentsVersions=e.SAFE_BASE_VERSION=e.SAFE_LAST_VERSION=void 0,e.SAFE_LAST_VERSION="1.3.0",e.SAFE_BASE_VERSION="1.1.1",e.safeDeploymentsVersions={"1.3.0":{safeMasterCopyVersion:"1.3.0",safeMasterCopyL2Version:"1.3.0",safeProxyFactoryVersion:"1.3.0",multiSendVersion:"1.3.0"},"1.2.0":{safeMasterCopyVersion:"1.2.0",safeMasterCopyL2Version:void 0,safeProxyFactoryVersion:"1.1.1",multiSendVersion:"1.1.1"},"1.1.1":{safeMasterCopyVersion:"1.1.1",safeMasterCopyL2Version:void 0,safeProxyFactoryVersion:"1.1.1",multiSendVersion:"1.1.1"}},e.safeDeploymentsL1ChainIds=[1]})),y=(0,p.g)((function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getMultiSendContract=e.getProxyFactoryContract=e.getSafeContract=e.getSafeProxyFactoryContractDeployment=e.getMultiSendContractDeployment=e.getSafeContractDeployment=void 0;var t=(0,f.h)(),r=w();function n(e,n){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s={version:r.safeDeploymentsVersions[e].safeMasterCopyVersion,network:n.toString(),released:!0};return r.safeDeploymentsL1ChainIds.includes(n)||a?(0,t.getSafeSingletonDeployment)(s):(0,t.getSafeL2SingletonDeployment)(s)}function a(e,n){var a=r.safeDeploymentsVersions[e].multiSendVersion;return(0,t.getMultiSendDeployment)({version:a,network:n.toString(),released:!0})}function s(e,n){var a=r.safeDeploymentsVersions[e].safeProxyFactoryVersion;return(0,t.getProxyFactoryDeployment)({version:a,network:n.toString(),released:!0})}function i(e){return o.apply(this,arguments)}function o(){return o=(0,d.Z)((0,c.Z)().mark((function e(t){var r,a,s,i,o,u,d,f;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.ethAdapter,a=t.safeVersion,s=t.chainId,i=t.customSafeAddress,o=t.isL1SafeMasterCopy,u=t.customContracts,d=n(a,s,o),f=r.getSafeContract({safeVersion:a,chainId:s,singletonDeployment:d,customContractAddress:null!==i&&void 0!==i?i:null==u?void 0:u.safeMasterCopyAddress,customContractAbi:null==u?void 0:u.safeMasterCopyAbi}),e.next=4,r.isContractDeployed(f.getAddress());case 4:if(e.sent){e.next=6;break}throw new Error("Safe Proxy contract is not deployed on the current network");case 6:return e.abrupt("return",f);case 7:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)}function u(e){return l.apply(this,arguments)}function l(){return(l=(0,d.Z)((0,c.Z)().mark((function e(t){var r,n,a,i,o,u;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.ethAdapter,n=t.safeVersion,a=t.chainId,i=t.customContracts,o=s(n,a),e.next=4,r.getSafeProxyFactoryContract({safeVersion:n,chainId:a,singletonDeployment:o,customContractAddress:null==i?void 0:i.safeProxyFactoryAddress,customContractAbi:null==i?void 0:i.safeProxyFactoryAbi});case 4:return u=e.sent,e.next=7,r.isContractDeployed(u.getAddress());case 7:if(e.sent){e.next=9;break}throw new Error("Safe Proxy Factory contract is not deployed on the current network");case 9:return e.abrupt("return",u);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return v.apply(this,arguments)}function v(){return(v=(0,d.Z)((0,c.Z)().mark((function e(t){var r,n,s,i,o,u;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.ethAdapter,n=t.safeVersion,s=t.chainId,i=t.customContracts,o=a(n,s),e.next=4,r.getMultiSendContract({safeVersion:n,chainId:s,singletonDeployment:o,customContractAddress:null==i?void 0:i.multiSendAddress,customContractAbi:null==i?void 0:i.multiSendAbi});case 4:return u=e.sent,e.next=7,r.isContractDeployed(u.getAddress());case 7:if(e.sent){e.next=9;break}throw new Error("Multi Send contract is not deployed on the current network");case 9:return e.abrupt("return",u);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(0,p.c)(n,"getSafeContractDeployment"),e.getSafeContractDeployment=n,(0,p.c)(a,"getMultiSendContractDeployment"),e.getMultiSendContractDeployment=a,(0,p.c)(s,"getSafeProxyFactoryContractDeployment"),e.getSafeProxyFactoryContractDeployment=s,(0,p.c)(i,"getSafeContract"),e.getSafeContract=i,(0,p.c)(u,"getProxyFactoryContract"),e.getProxyFactoryContract=u,(0,p.c)(h,"getMultiSendContract"),e.getMultiSendContract=h})),g=(0,p.g)((function(e){var t,r,n,a,s=e&&e.__classPrivateFieldSet||function(e,t,r,n,a){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?a.call(e,r):a?a.value=r:t.set(e,r),r},i=e&&e.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(e,"__esModule",{value:!0});var f=w(),l=y(),h=(0,p.c)(function(){function e(){(0,o.Z)(this,e),t.set(this,void 0),r.set(this,void 0),n.set(this,void 0),a.set(this,void 0)}return(0,u.Z)(e,[{key:"init",value:function(){var e=(0,d.Z)((0,c.Z)().mark((function e(i){var o,u,d,h,p,v,w;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=i.ethAdapter,u=i.safeAddress,d=i.isL1SafeMasterCopy,h=i.contractNetworks,e.next=3,o.getChainId();case 3:return p=e.sent,v=null==h?void 0:h[p],s(this,t,h,"f"),s(this,r,d,"f"),e.next=8,(0,l.getSafeContract)({ethAdapter:o,safeVersion:f.SAFE_LAST_VERSION,chainId:p,isL1SafeMasterCopy:d,customSafeAddress:u,customContracts:v});case 8:return e.next=10,e.sent.getVersion();case 10:return w=e.sent,e.t0=s,e.t1=this,e.t2=n,e.next=16,(0,l.getSafeContract)({ethAdapter:o,safeVersion:w,chainId:p,isL1SafeMasterCopy:d,customSafeAddress:u,customContracts:v});case 16:return e.t3=e.sent,(0,e.t0)(e.t1,e.t2,e.t3,"f"),e.t4=s,e.t5=this,e.t6=a,e.next=23,(0,l.getMultiSendContract)({ethAdapter:o,safeVersion:w,chainId:p,customContracts:v});case 23:e.t7=e.sent,(0,e.t4)(e.t5,e.t6,e.t7,"f");case 25:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"contractNetworks",get:function(){return i(this,t,"f")}},{key:"isL1SafeMasterCopy",get:function(){return i(this,r,"f")}},{key:"safeContract",get:function(){return i(this,n,"f")}},{key:"multiSendContract",get:function(){return i(this,a,"f")}}],[{key:"create",value:function(){var t=(0,d.Z)((0,c.Z)().mark((function t(r){var n,a,s,i,o;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.ethAdapter,a=r.safeAddress,s=r.isL1SafeMasterCopy,i=r.contractNetworks,o=new e,t.next=4,o.init({ethAdapter:n,safeAddress:a,isL1SafeMasterCopy:s,contractNetworks:i});case 4:return t.abrupt("return",o);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}]),e}(),"ContractManager");t=new WeakMap,r=new WeakMap,n=new WeakMap,a=new WeakMap,e.default=h})),x=(0,p.g)((function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SENTINEL_ADDRESS=e.EMPTY_DATA=e.ZERO_ADDRESS=void 0,e.ZERO_ADDRESS="0x".concat("0".repeat(40)),e.EMPTY_DATA="0x",e.SENTINEL_ADDRESS="0x0000000000000000000000000000000000000001"})),m=(0,p.g)((function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isMetaTransactionArray=e.isRestrictedAddress=e.sameString=void 0;var t=x();function r(e,t){return e.toLowerCase()===t.toLowerCase()}function n(e){return e===t.ZERO_ADDRESS}function a(e){return e===t.SENTINEL_ADDRESS}function s(e){return n(e)||a(e)}function i(e){return void 0!==(null==e?void 0:e.length)}(0,p.c)(r,"sameString"),e.sameString=r,(0,p.c)(n,"isZeroAddress"),(0,p.c)(a,"isSentinelAddress"),(0,p.c)(s,"isRestrictedAddress"),e.isRestrictedAddress=s,(0,p.c)(i,"isMetaTransactionArray"),e.isMetaTransactionArray=i})),S=(0,p.g)((function(e){var t,r,n=e&&e.__classPrivateFieldSet||function(e,t,r,n,a){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?a.call(e,r):a?a.value=r:t.set(e,r),r},a=e&&e.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(e,"__esModule",{value:!0});var s=m(),i=x(),f=(0,p.c)(function(){function e(a,s){(0,o.Z)(this,e),t.set(this,void 0),r.set(this,void 0),n(this,t,a,"f"),n(this,r,s,"f")}return(0,u.Z)(e,[{key:"validateModuleAddress",value:function(e){if(!a(this,t,"f").isAddress(e)||(0,s.isRestrictedAddress)(e))throw new Error("Invalid module address provided")}},{key:"validateModuleIsNotEnabled",value:function(e,t){if(t.findIndex((function(t){return(0,s.sameString)(t,e)}))>=0)throw new Error("Module provided is already enabled")}},{key:"validateModuleIsEnabled",value:function(e,t){var r=t.findIndex((function(t){return(0,s.sameString)(t,e)}));if(!(r>=0))throw new Error("Module provided is not enabled already");return r}},{key:"getModules",value:function(){var e=(0,d.Z)((0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a(this,r,"f").getModules());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isModuleEnabled",value:function(){var e=(0,d.Z)((0,c.Z)().mark((function e(t){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a(this,r,"f").isModuleEnabled(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"encodeEnableModuleData",value:function(){var e=(0,d.Z)((0,c.Z)().mark((function e(t){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.validateModuleAddress(t),e.next=3,this.getModules();case 3:return n=e.sent,e.abrupt("return",(this.validateModuleIsNotEnabled(t,n),a(this,r,"f").encode("enableModule",[t])));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"encodeDisableModuleData",value:function(){var e=(0,d.Z)((0,c.Z)().mark((function e(t){var n,s,o;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.validateModuleAddress(t),e.next=3,this.getModules();case 3:return n=e.sent,s=this.validateModuleIsEnabled(t,n),o=0===s?i.SENTINEL_ADDRESS:n[s-1],e.abrupt("return",a(this,r,"f").encode("disableModule",[o,t]));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),"ModuleManager");t=new WeakMap,r=new WeakMap,e.default=f})),k=(0,p.g)((function(e){var t,r,n=e&&e.__classPrivateFieldSet||function(e,t,r,n,a){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?a.call(e,r):a?a.value=r:t.set(e,r),r},a=e&&e.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(e,"__esModule",{value:!0});var s=m(),f=x(),l=(0,p.c)(function(){function e(a,s){(0,o.Z)(this,e),t.set(this,void 0),r.set(this,void 0),n(this,t,a,"f"),n(this,r,s,"f")}return(0,u.Z)(e,[{key:"validateOwnerAddress",value:function(e,r){if(!a(this,t,"f").isAddress(e)||(0,s.isRestrictedAddress)(e))throw new Error(r||"Invalid owner address provided")}},{key:"validateThreshold",value:function(e,t){if(e<=0)throw new Error("Threshold needs to be greater than 0");if(e>t)throw new Error("Threshold cannot exceed owner count")}},{key:"validateAddressIsNotOwner",value:function(e,t,r){if(t.findIndex((function(t){return(0,s.sameString)(t,e)}))>=0)throw new Error(r||"Address provided is already an owner")}},{key:"validateAddressIsOwner",value:function(e,t,r){var n=t.findIndex((function(t){return(0,s.sameString)(t,e)}));if(!(n>=0))throw new Error(r||"Address provided is not an owner");return n}},{key:"getOwners",value:function(){var e=(0,d.Z)((0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=i.Z,e.next=3,a(this,r,"f").getOwners();case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getThreshold",value:function(){var e=(0,d.Z)((0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a(this,r,"f").getThreshold());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isOwner",value:function(){var e=(0,d.Z)((0,c.Z)().mark((function e(t){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a(this,r,"f").isOwner(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"encodeAddOwnerWithThresholdData",value:function(){var e=(0,d.Z)((0,c.Z)().mark((function e(t,n){var s,i;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.validateOwnerAddress(t),e.next=3,this.getOwners();case 3:if(s=e.sent,this.validateAddressIsNotOwner(t,s),null===n||void 0===n){e.next=9;break}e.t0=n,e.next=12;break;case 9:return e.next=11,this.getThreshold();case 11:e.t0=e.sent;case 12:return i=e.t0,e.abrupt("return",(this.validateThreshold(i,s.length+1),a(this,r,"f").encode("addOwnerWithThreshold",[t,i])));case 14:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"encodeRemoveOwnerData",value:function(){var e=(0,d.Z)((0,c.Z)().mark((function e(t,n){var s,i,o,u;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.validateOwnerAddress(t),e.next=3,this.getOwners();case 3:if(s=e.sent,i=this.validateAddressIsOwner(t,s),null===n||void 0===n){e.next=9;break}e.t0=n,e.next=13;break;case 9:return e.next=11,this.getThreshold();case 11:e.t1=e.sent,e.t0=e.t1-1;case 13:return o=e.t0,this.validateThreshold(o,s.length-1),u=0===i?f.SENTINEL_ADDRESS:s[i-1],e.abrupt("return",a(this,r,"f").encode("removeOwner",[u,t,o]));case 17:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"encodeSwapOwnerData",value:function(){var e=(0,d.Z)((0,c.Z)().mark((function e(t,n){var s,i,o;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.validateOwnerAddress(n,"Invalid new owner address provided"),this.validateOwnerAddress(t,"Invalid old owner address provided"),e.next=3,this.getOwners();case 3:return s=e.sent,this.validateAddressIsNotOwner(n,s,"New address provided is already an owner"),i=this.validateAddressIsOwner(t,s,"Old address provided is not an owner"),o=0===i?f.SENTINEL_ADDRESS:s[i-1],e.abrupt("return",a(this,r,"f").encode("swapOwner",[o,t,n]));case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"encodeChangeThresholdData",value:function(){var e=(0,d.Z)((0,c.Z)().mark((function e(t){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOwners();case 2:return n=e.sent,e.abrupt("return",(this.validateThreshold(t,n.length),a(this,r,"f").encode("changeThreshold",[t])));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),"OwnerManager");t=new WeakMap,r=new WeakMap,e.default=l})),b=(0,p.g)((function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=(0,p.c)(function(){function e(t,r){(0,o.Z)(this,e),this.signer=t,this.data=r}return(0,u.Z)(e,[{key:"staticPart",value:function(){return this.data}},{key:"dynamicPart",value:function(){return""}}]),e}(),"EthSignSignature");e.default=t})),A=(0,p.g)((function(e){var t=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.generateSignature=e.adjustVInSignature=e.isTxHashSignedWithPrefix=e.generatePreValidatedSignature=void 0;var r=(0,l.d)(),n=m(),a=t(b());function s(e){var t="0x000000000000000000000000"+e.slice(2)+"000000000000000000000000000000000000000000000000000000000000000001";return new a.default(e,t)}function i(e,t,a){var s;try{var i={r:Buffer.from(t.slice(2,66),"hex"),s:Buffer.from(t.slice(66,130),"hex"),v:parseInt(t.slice(130,132),16)},o=(0,r.ecrecover)(Buffer.from(e.slice(2),"hex"),i.v,i.r,i.s),u=(0,r.bufferToHex)((0,r.pubToAddress)(o));s=!(0,n.sameString)(u,a)}catch(c){s=!0}return s}function o(e,t){var r=parseInt(e.slice(-2),16);if(![0,1,27,28].includes(r))throw new Error("Invalid signature");return r<27&&(r+=27),t&&(r+=4),e=e.slice(0,-2)+r.toString(16)}function u(e,t){return f.apply(this,arguments)}function f(){return(f=(0,d.Z)((0,c.Z)().mark((function e(t,r){var n,s,u;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getSignerAddress();case 2:return n=e.sent,e.next=5,t.signMessage(r);case 5:return s=e.sent,u=i(r,s,n),e.abrupt("return",(s=o(s,u),new a.default(n,s)));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(0,p.c)(s,"generatePreValidatedSignature"),e.generatePreValidatedSignature=s,(0,p.c)(i,"isTxHashSignedWithPrefix"),e.isTxHashSignedWithPrefix=i,(0,p.c)(o,"adjustVInSignature"),e.adjustVInSignature=o,(0,p.c)(u,"generateSignature"),e.generateSignature=u})),Z=(0,p.g)((function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=(0,p.c)(function(){function e(t){(0,o.Z)(this,e),this.signatures=new Map,this.data=t}return(0,u.Z)(e,[{key:"addSignature",value:function(e){this.signatures.set(e.signer.toLowerCase(),e)}},{key:"encodedSignatures",value:function(){var e=this,t=Array.from(this.signatures.keys()).sort();t.length;var r="",n="";return t.forEach((function(t){var a=e.signatures.get(t);r+=null==a?void 0:a.staticPart().slice(2),n+=null==a?void 0:a.dynamicPart()})),"0x"+r+n}}]),e}(),"EthSafeTransaction");e.default=t})),E=(0,p.f)((function(){v="sha2/5.6.1"}));function T(e){return"0x"+C.default.sha256().update((0,h.h)(e)).digest("hex")}var C,M,_=(0,p.f)((function(){C=(0,p.i)((0,l.b)()),(0,h.s)(),(0,h.f)(),E(),new h.e(v),(0,p.c)(T,"sha256")})),D=(0,p.f)((function(){_()})),O=(0,p.f)((function(){M="solidity/5.6.1"})),P={};function I(e,t,r){switch(e){case"address":return r?(0,h.k)(t,32):(0,h.h)(t);case"string":return(0,f.d)(t);case"bytes":return(0,h.h)(t);case"bool":return t=t?"0x01":"0x00",r?(0,h.k)(t,32):(0,h.h)(t)}var n=e.match(R);if(n){var a=parseInt(n[2]||"256");return(n[2]&&String(a)!==n[2]||a%8!==0||0===a||a>256)&&G.throwArgumentError("invalid number type","type",e),r&&(a=256),t=h.t.from(t).toTwos(a),(0,h.k)(t,a/8)}if(n=e.match(L)){var s=parseInt(n[1]);return(String(s)!==n[1]||0===s||s>32)&&G.throwArgumentError("invalid bytes type","type",e),(0,h.h)(t).byteLength!==s&&G.throwArgumentError("invalid value for ".concat(e),"value",t),r?(0,h.h)((t+W).substring(0,66)):t}if((n=e.match(j))&&Array.isArray(t)){var i=n[1];parseInt(n[2]||String(t.length))!=t.length&&G.throwArgumentError("invalid array length for ".concat(e),"value",t);var o=[];return t.forEach((function(e){o.push(I(i,e,!0))})),(0,h.i)(o)}return G.throwArgumentError("invalid type","type",e)}function N(e,t){e.length!=t.length&&G.throwArgumentError("wrong number of values; expected ${ types.length }","values",t);var r=[];return e.forEach((function(e,n){r.push(I(e,t[n]))})),(0,h.m)((0,h.i)(r))}function V(e,t){return(0,f.b)(N(e,t))}function F(e,t){return T(N(e,t))}(0,p.h)(P,{keccak256:function(){return V},pack:function(){return N},sha256:function(){return F}});var L,R,j,W,G,z=(0,p.f)((function(){(0,h.x)(),(0,h.s)(),(0,f.c)(),D(),(0,f.f)(),(0,h.f)(),O(),L=new RegExp("^bytes([0-9]+)$"),R=new RegExp("^(u?int)([0-9]*)$"),j=new RegExp("^(.*)\\[([0-9]*)\\]$"),W="0000000000000000000000000000000000000000000000000000000000000000",G=new h.e(M),(0,p.c)(I,"_pack"),(0,p.c)(N,"pack"),(0,p.c)(V,"keccak256"),(0,p.c)(F,"sha256")})),H=(0,p.g)((function(e){var t=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.hasFeature=e.enabledFeatures=e.FEATURES=void 0;var r,n,a=t((0,f.g)());(n=r=e.FEATURES||(e.FEATURES={}))[n.SAFE_TX_GAS_OPTIONAL=0]="SAFE_TX_GAS_OPTIONAL";var i=(0,s.Z)({},r.SAFE_TX_GAS_OPTIONAL,">=1.3.0"),o=(0,p.c)((function(e,t){return!(e in i)||(0,a.default)(t,i[e])}),"isEnabledByVersion"),u=(0,p.c)((function(e){return Object.values(r).filter((function(t){return o(t,e)}))}),"enabledFeatures");e.enabledFeatures=u;var c=(0,p.c)((function(t,r){return(0,e.enabledFeatures)(r).includes(t)}),"hasFeature");e.hasFeature=c})),B=(0,p.g)((function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.estimateTxGas=void 0;var t=((0,h.x)(),(0,p.j)(h.w)),r=(0,f.a)();function n(e){var t=(0,p.c)((function(e,t){return"0x"===t?e+0:"00"===t?e+4:e+16}),"reducer");return e.match(/.{2}/g).reduce(t,0)}function a(e,t,r,n,a,i){return s.apply(this,arguments)}function s(){return s=(0,d.Z)((0,c.Z)().mark((function e(a,s,i,o,u,d){var f,l,h,p,v,w,y;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f=0,l=a.getAddress(),h=a.encode("requiredTxGas",[i,o,u,d]),e.prev=1,e.next=4,s.estimateGas({to:l,from:l,data:h});case 4:p=e.sent.toString(),f=t.BigNumber.from("0x"+p.substring(138)).toNumber()+1e4,e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:if(!(f>0)){e.next=29;break}v=n(h),w=1e4,y=0;case 13:if(!(y<10)){e.next=28;break}return e.prev=14,e.next=17,s.call({to:l,from:l,data:h,gasPrice:0,gasLimit:f+v+w});case 17:if(e.t1=e.sent,"0x"===e.t1){e.next=20;break}return e.abrupt("break",28);case 20:e.next=24;break;case 22:e.prev=22,e.t2=e.catch(14);case 24:f+=w,w*=2;case 25:y++,e.next=13;break;case 28:return e.abrupt("return",f+w);case 29:return e.prev=29,e.next=32,s.estimateGas({to:i,from:l,value:o,data:u});case 32:return e.abrupt("return",e.sent);case 35:return e.prev=35,e.t3=e.catch(29),e.abrupt("return",d===r.OperationType.DelegateCall?0:Promise.reject(e.t3));case 38:case"end":return e.stop()}}),e,null,[[1,8],[14,22],[29,35]])}))),s.apply(this,arguments)}(0,p.c)(n,"estimateDataGasCosts"),(0,p.c)(a,"estimateTxGas"),e.estimateTxGas=a})),U=(0,p.g)((function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.encodeMultiSendData=e.standardizeSafeTransactionData=e.standardizeMetaTransactionData=void 0;var t=((0,h.s)(),(0,p.j)(h.r)),r=(z(),(0,p.j)(P)),n=(0,f.a)(),a=x(),s=H(),i=B();function o(e){var t;return(0,p.b)((0,p.a)({},e),{operation:null!==(t=e.operation)&&void 0!==t?t:n.OperationType.Call})}function u(e,t,r){return l.apply(this,arguments)}function l(){return l=(0,d.Z)((0,c.Z)().mark((function e(t,r,o){var u,d,f,l,h,v,w,y;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=o.to,e.t1=o.value,e.t2=o.data,e.t3=null!==(u=o.operation)&&void 0!==u?u:n.OperationType.Call,e.t4=null!==(d=o.baseGas)&&void 0!==d?d:0,e.t5=null!==(f=o.gasPrice)&&void 0!==f?f:0,e.t6=o.gasToken||a.ZERO_ADDRESS,e.t7=o.refundReceiver||a.ZERO_ADDRESS,null===(l=o.nonce)||void 0===l){e.next=12;break}e.t8=l,e.next=15;break;case 12:return e.next=14,t.getNonce();case 14:e.t8=e.sent;case 15:return e.t9=e.t8,v={to:e.t0,value:e.t1,data:e.t2,operation:e.t3,baseGas:e.t4,gasPrice:e.t5,gasToken:e.t6,refundReceiver:e.t7,nonce:e.t9},e.next=19,t.getVersion();case 19:if(y=e.sent,!(0,s.hasFeature)(s.FEATURES.SAFE_TX_GAS_OPTIONAL,y)||0!==v.gasPrice){e.next=24;break}w=0,e.next=32;break;case 24:if(null===(h=o.safeTxGas)||void 0===h){e.next=28;break}e.t10=h,e.next=31;break;case 28:return e.next=30,(0,i.estimateTxGas)(t,r,v.to,v.value,v.data,v.operation);case 30:e.t10=e.sent;case 31:w=e.t10;case 32:return e.abrupt("return",(0,p.b)((0,p.a)({},v),{safeTxGas:w}));case 33:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}function v(e){var n=(0,t.arrayify)(e.data);return(0,r.pack)(["uint8","address","uint256","uint256","bytes"],[e.operation,e.to,e.value,n.length,n]).slice(2)}function w(e){return"0x"+e.map((function(e){return v(e)})).join("")}(0,p.c)(o,"standardizeMetaTransactionData"),e.standardizeMetaTransactionData=o,(0,p.c)(u,"standardizeSafeTransactionData"),e.standardizeSafeTransactionData=u,(0,p.c)(v,"encodeMetaTransaction"),(0,p.c)(w,"encodeMultiSendData"),e.encodeMultiSendData=w})),X=(0,p.g)((function(e){var t,r,n,s,i=e&&e.__classPrivateFieldSet||function(e,t,r,n,a){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?a.call(e,r):a?a.value=r:t.set(e,r),r},l=e&&e.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},v=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0});var w=((0,h.x)(),(0,p.j)(h.w)),y=(0,f.a)(),x=v(g()),b=v(S()),E=v(k()),T=m(),C=A(),M=v(Z()),_=U(),D=(0,p.c)(function(){function e(){(0,o.Z)(this,e),t.set(this,void 0),r.set(this,void 0),n.set(this,void 0),s.set(this,void 0)}return(0,u.Z)(e,[{key:"init",value:function(){var e=(0,d.Z)((0,c.Z)().mark((function e(a){var o,u,d,f;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=a.ethAdapter,u=a.safeAddress,d=a.isL1SafeMasterCopy,f=a.contractNetworks,i(this,t,o,"f"),e.t0=i,e.t1=this,e.t2=r,e.next=7,x.default.create({ethAdapter:l(this,t,"f"),safeAddress:u,isL1SafeMasterCopy:d,contractNetworks:f});case 7:e.t3=e.sent,(0,e.t0)(e.t1,e.t2,e.t3,"f"),i(this,n,new E.default(l(this,t,"f"),l(this,r,"f").safeContract),"f"),i(this,s,new b.default(l(this,t,"f"),l(this,r,"f").safeContract),"f");case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"connect",value:function(){var n=(0,d.Z)((0,c.Z)().mark((function n(a){var s,i,o,u;return(0,c.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=a.ethAdapter,i=a.safeAddress,o=a.isL1SafeMasterCopy,u=a.contractNetworks,n.next=3,e.create({ethAdapter:s||l(this,t,"f"),safeAddress:i||this.getAddress(),isL1SafeMasterCopy:o||l(this,r,"f").isL1SafeMasterCopy,contractNetworks:u||l(this,r,"f").contractNetworks});case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n,this)})));return function(e){return n.apply(this,arguments)}}()},{key:"getAddress",value:function(){return l(this,r,"f").safeContract.getAddress()}},{key:"getContractManager",value:function(){return l(this,r,"f")}},{key:"getEthAdapter",value:function(){return l(this,t,"f")}},{key:"getMultiSendAddress",value:function(){return l(this,r,"f").multiSendContract.getAddress()}},{key:"getContractVersion",value:function(){var e=(0,d.Z)((0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l(this,r,"f").safeContract.getVersion());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getOwners",value:function(){var e=(0,d.Z)((0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l(this,n,"f").getOwners());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getNonce",value:function(){var e=(0,d.Z)((0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l(this,r,"f").safeContract.getNonce());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getThreshold",value:function(){var e=(0,d.Z)((0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l(this,n,"f").getThreshold());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getChainId",value:function(){var e=(0,d.Z)((0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l(this,t,"f").getChainId());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getBalance",value:function(){var e=(0,d.Z)((0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l(this,t,"f").getBalance(this.getAddress()));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getModules",value:function(){var e=(0,d.Z)((0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l(this,s,"f").getModules());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isModuleEnabled",value:function(){var e=(0,d.Z)((0,c.Z)().mark((function e(t){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l(this,s,"f").isModuleEnabled(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"isOwner",value:function(){var e=(0,d.Z)((0,c.Z)().mark((function e(t){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l(this,n,"f").isOwner(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createTransaction",value:function(){var e=(0,d.Z)((0,c.Z)().mark((function e(n,a){var s,i,o;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,T.isMetaTransactionArray)(n)||0!==n.length){e.next=2;break}throw new Error("Invalid empty array of transactions");case 2:return(0,T.isMetaTransactionArray)(n)&&n.length>1?(i=(0,_.encodeMultiSendData)(n.map(_.standardizeMetaTransactionData)),s=(0,p.b)((0,p.a)({},a),{to:l(this,r,"f").multiSendContract.getAddress(),value:"0",data:l(this,r,"f").multiSendContract.encode("multiSend",[i]),operation:y.OperationType.DelegateCall})):s=(0,T.isMetaTransactionArray)(n)?(0,p.a)((0,p.a)({},a),n[0]):n,e.next=5,(0,_.standardizeSafeTransactionData)(l(this,r,"f").safeContract,l(this,t,"f"),s);case 5:return o=e.sent,e.abrupt("return",new M.default(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"createRejectionTransaction",value:function(){var e=(0,d.Z)((0,c.Z)().mark((function e(t){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.createTransaction({to:this.getAddress(),nonce:t,value:"0",data:"0x",safeTxGas:0}));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTransactionHash",value:function(){var e=(0,d.Z)((0,c.Z)().mark((function e(t){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data,e.next=3,l(this,r,"f").safeContract.getTransactionHash(n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signTransactionHash",value:function(){var e=(0,d.Z)((0,c.Z)().mark((function e(r){var n,a;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOwners();case 2:return n=e.sent,e.next=5,l(this,t,"f").getSignerAddress();case 5:if(a=e.sent,n.find((function(e){return a&&(0,T.sameString)(e,a)}))){e.next=8;break}throw new Error("Transactions can only be signed by Safe owners");case 8:return e.abrupt("return",(0,C.generateSignature)(l(this,t,"f"),r));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signTransaction",value:function(){var e=(0,d.Z)((0,c.Z)().mark((function e(t){var r,n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getTransactionHash(t);case 2:return r=e.sent,e.next=5,this.signTransactionHash(r);case 5:n=e.sent,t.addSignature(n);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"approveTransactionHash",value:function(){var e=(0,d.Z)((0,c.Z)().mark((function e(n,a){var s,i;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOwners();case 2:return s=e.sent,e.next=5,l(this,t,"f").getSignerAddress();case 5:if(i=e.sent,s.find((function(e){return i&&(0,T.sameString)(e,i)}))){e.next=8;break}throw new Error("Transaction hashes can only be approved by Safe owners");case 8:if(!(null==a?void 0:a.gas)||!(null==a?void 0:a.gasLimit)){e.next=10;break}throw new Error("Cannot specify gas and gasLimit together in transaction options");case 10:return e.abrupt("return",l(this,r,"f").safeContract.approveHash(n,(0,p.a)({from:i},a)));case 11:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getOwnersWhoApprovedTx",value:function(){var e=(0,d.Z)((0,c.Z)().mark((function e(t){var n,s,i,o,u;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOwners();case 2:n=e.sent,s=[],i=(0,a.Z)(n),e.prev=5,i.s();case 7:if((o=i.n()).done){e.next=16;break}return u=o.value,e.next=11,l(this,r,"f").safeContract.approvedHashes(u,t);case 11:if(e.t0=e.sent.gt(0),!e.t0){e.next=14;break}s.push(u);case 14:e.next=7;break;case 16:e.next=21;break;case 18:e.prev=18,e.t1=e.catch(5),i.e(e.t1);case 21:return e.prev=21,i.f(),e.finish(21);case 24:return e.abrupt("return",s);case 25:case"end":return e.stop()}}),e,this,[[5,18,21,24]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getEnableModuleTx",value:function(){var e=(0,d.Z)((0,c.Z)().mark((function e(t,r){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.t1=p.a,e.t2=this.getAddress(),e.next=5,l(this,s,"f").encodeEnableModuleData(t);case 5:return e.t3=e.sent,e.t4={to:e.t2,value:"0",data:e.t3},e.t5=r,e.t6=(0,e.t1)(e.t4,e.t5),e.next=11,e.t0.createTransaction.call(e.t0,e.t6);case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getDisableModuleTx",value:function(){var e=(0,d.Z)((0,c.Z)().mark((function e(t,r){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.t1=p.a,e.t2=this.getAddress(),e.next=5,l(this,s,"f").encodeDisableModuleData(t);case 5:return e.t3=e.sent,e.t4={to:e.t2,value:"0",data:e.t3},e.t5=r,e.t6=(0,e.t1)(e.t4,e.t5),e.next=11,e.t0.createTransaction.call(e.t0,e.t6);case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getAddOwnerTx",value:function(){var e=(0,d.Z)((0,c.Z)().mark((function e(t,r){var a,s;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.ownerAddress,s=t.threshold,e.t0=this,e.t1=p.a,e.t2=this.getAddress(),e.next=6,l(this,n,"f").encodeAddOwnerWithThresholdData(a,s);case 6:return e.t3=e.sent,e.t4={to:e.t2,value:"0",data:e.t3},e.t5=r,e.t6=(0,e.t1)(e.t4,e.t5),e.next=12,e.t0.createTransaction.call(e.t0,e.t6);case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getRemoveOwnerTx",value:function(){var e=(0,d.Z)((0,c.Z)().mark((function e(t,r){var a,s;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.ownerAddress,s=t.threshold,e.t0=this,e.t1=p.a,e.t2=this.getAddress(),e.next=6,l(this,n,"f").encodeRemoveOwnerData(a,s);case 6:return e.t3=e.sent,e.t4={to:e.t2,value:"0",data:e.t3},e.t5=r,e.t6=(0,e.t1)(e.t4,e.t5),e.next=12,e.t0.createTransaction.call(e.t0,e.t6);case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getSwapOwnerTx",value:function(){var e=(0,d.Z)((0,c.Z)().mark((function e(t,r){var a,s;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.oldOwnerAddress,s=t.newOwnerAddress,e.t0=this,e.t1=p.a,e.t2=this.getAddress(),e.next=6,l(this,n,"f").encodeSwapOwnerData(a,s);case 6:return e.t3=e.sent,e.t4={to:e.t2,value:"0",data:e.t3},e.t5=r,e.t6=(0,e.t1)(e.t4,e.t5),e.next=12,e.t0.createTransaction.call(e.t0,e.t6);case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getChangeThresholdTx",value:function(){var e=(0,d.Z)((0,c.Z)().mark((function e(t,r){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.t1=p.a,e.t2=this.getAddress(),e.next=5,l(this,n,"f").encodeChangeThresholdData(t);case 5:return e.t3=e.sent,e.t4={to:e.t2,value:"0",data:e.t3},e.t5=r,e.t6=(0,e.t1)(e.t4,e.t5),e.next=11,e.t0.createTransaction.call(e.t0,e.t6);case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"executeTransaction",value:function(){var e=(0,d.Z)((0,c.Z)().mark((function e(n,s){var i,o,u,d,f,h,v,y,g,x,m;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getTransactionHash(n);case 2:return i=e.sent,e.next=5,this.getOwnersWhoApprovedTx(i);case 5:o=e.sent,u=(0,a.Z)(o);try{for(u.s();!(d=u.n()).done;)f=d.value,n.addSignature((0,C.generatePreValidatedSignature)(f))}catch(c){u.e(c)}finally{u.f()}return e.next=10,this.getOwners();case 10:return h=e.sent,e.next=13,l(this,t,"f").getSignerAddress();case 13:return v=e.sent,h.includes(v)&&n.addSignature((0,C.generatePreValidatedSignature)(v)),e.next=17,this.getThreshold();case 17:if(!((y=e.sent)>n.signatures.size)){e.next=21;break}throw g=y-n.signatures.size,new Error("There ".concat(g>1?"are":"is"," ").concat(g," signature").concat(g>1?"s":""," missing"));case 21:if((x=w.BigNumber.from(n.data.value)).isZero()){e.next=28;break}return e.next=25,this.getBalance();case 25:if(m=e.sent,!x.gt(w.BigNumber.from(m))){e.next=28;break}throw new Error("Not enough Ether funds");case 28:if(!(null==s?void 0:s.gas)||!(null==s?void 0:s.gasLimit)){e.next=30;break}throw new Error("Cannot specify gas and gasLimit together in transaction options");case 30:return e.next=32,l(this,r,"f").safeContract.execTransaction(n,(0,p.a)({from:v},s));case 32:return e.abrupt("return",e.sent);case 33:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()}],[{key:"create",value:function(){var t=(0,d.Z)((0,c.Z)().mark((function t(r){var n,a,s,i,o;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.ethAdapter,a=r.safeAddress,s=r.isL1SafeMasterCopy,i=r.contractNetworks,o=new e,t.next=4,o.init({ethAdapter:n,safeAddress:a,isL1SafeMasterCopy:s,contractNetworks:i});case 4:return t.abrupt("return",o);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}]),e}(),"Safe");t=new WeakMap,r=new WeakMap,n=new WeakMap,s=new WeakMap,e.default=D})),$=(0,p.g)((function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSafeAccountConfig=void 0;var t=(0,p.c)((function(e){var t=e.owners,r=e.threshold;if(t.length<=0)throw new Error("Owner list must have at least one owner");if(r<=0)throw new Error("Threshold must be greater than or equal to 1");if(r>t.length)throw new Error("Threshold must be lower than or equal to owners length")}),"validateSafeAccountConfig");e.validateSafeAccountConfig=t})),q=(0,p.g)((function(e){var t,r,n,a,s,i,f=e&&e.__classPrivateFieldSet||function(e,t,r,n,a){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?a.call(e,r):a?a.value=r:t.set(e,r),r},l=e&&e.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},h=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0});var v=w(),g=y(),m=h(X()),S=x(),k=$(),b=(0,p.c)(function(){function e(){(0,o.Z)(this,e),t.set(this,void 0),r.set(this,void 0),n.set(this,void 0),a.set(this,void 0),s.set(this,void 0),i.set(this,void 0)}return(0,u.Z)(e,[{key:"init",value:function(){var e=(0,d.Z)((0,c.Z)().mark((function e(o){var u,d,h,p,v,w;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=o.ethAdapter,d=o.safeVersion,h=o.isL1SafeMasterCopy,p=o.contractNetworks,f(this,a,u,"f"),f(this,n,d,"f"),f(this,r,h,"f"),f(this,t,p,"f"),e.next=4,l(this,a,"f").getChainId();case 4:return v=e.sent,w=null==p?void 0:p[v],e.t0=f,e.t1=this,e.t2=s,e.next=11,(0,g.getProxyFactoryContract)({ethAdapter:u,safeVersion:d,chainId:v,customContracts:w});case 11:return e.t3=e.sent,(0,e.t0)(e.t1,e.t2,e.t3,"f"),e.t4=f,e.t5=this,e.t6=i,e.next=18,(0,g.getSafeContract)({ethAdapter:u,safeVersion:d,chainId:v,isL1SafeMasterCopy:h,customContracts:w});case 18:e.t7=e.sent,(0,e.t4)(e.t5,e.t6,e.t7,"f");case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getEthAdapter",value:function(){return l(this,a,"f")}},{key:"getSafeVersion",value:function(){return l(this,n,"f")}},{key:"getAddress",value:function(){return l(this,s,"f").getAddress()}},{key:"getChainId",value:function(){var e=(0,d.Z)((0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l(this,a,"f").getChainId());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"encodeSetupCallData",value:function(){var e=(0,d.Z)((0,c.Z)().mark((function e(t){var r,n,a,s,o,u,d,f,h,p,v,w,y,g;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.owners,n=t.threshold,a=t.to,s=void 0===a?S.ZERO_ADDRESS:a,o=t.data,u=void 0===o?S.EMPTY_DATA:o,d=t.fallbackHandler,f=void 0===d?S.ZERO_ADDRESS:d,h=t.paymentToken,p=void 0===h?S.ZERO_ADDRESS:h,v=t.payment,w=void 0===v?0:v,y=t.paymentReceiver,g=void 0===y?S.ZERO_ADDRESS:y,e.abrupt("return",l(this,i,"f").encode("setup",[r,n,s,u,f,p,w,g]));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deploySafe",value:function(){var e=(0,d.Z)((0,c.Z)().mark((function e(n){var o,u,d,f,h,v,w,y,g;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=n.safeAccountConfig,u=n.safeDeploymentConfig,d=n.options,f=n.callback,(0,k.validateSafeAccountConfig)(o),e.next=4,l(this,a,"f").getSignerAddress();case 4:return v=e.sent,e.next=7,this.encodeSetupCallData(o);case 7:if(w=e.sent,y=null!==(h=null==u?void 0:u.saltNonce)&&void 0!==h?h:1e3*Date.now()+Math.floor(1e3*Math.random()),!(null==d?void 0:d.gas)||!(null==d?void 0:d.gasLimit)){e.next=11;break}throw new Error("Cannot specify gas and gasLimit together in transaction options");case 11:return e.next=13,l(this,s,"f").createProxy({safeMasterCopyAddress:l(this,i,"f").getAddress(),initializer:w,saltNonce:y,options:(0,p.a)({from:v},d),callback:f});case 13:return g=e.sent,e.next=16,l(this,a,"f").isContractDeployed(g);case 16:if(e.sent){e.next=18;break}throw new Error("Safe Proxy contract is not deployed on the current network");case 18:return e.next=20,m.default.create({ethAdapter:l(this,a,"f"),safeAddress:g,isL1SafeMasterCopy:l(this,r,"f"),contractNetworks:l(this,t,"f")});case 20:return e.abrupt("return",e.sent);case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"create",value:function(){var t=(0,d.Z)((0,c.Z)().mark((function t(r){var n,a,s,i,o,u,d;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.ethAdapter,a=r.safeVersion,s=void 0===a?v.SAFE_LAST_VERSION:a,i=r.isL1SafeMasterCopy,o=void 0!==i&&i,u=r.contractNetworks,d=new e,t.next=4,d.init({ethAdapter:n,safeVersion:s,isL1SafeMasterCopy:o,contractNetworks:u});case 4:return t.abrupt("return",d);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}]),e}(),"SafeFactory");t=new WeakMap,r=new WeakMap,n=new WeakMap,a=new WeakMap,s=new WeakMap,i=new WeakMap,e.default=b})),Y=(0,p.g)((function(e){var t=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.standardizeSafeTransactionData=e.EthSignSignature=e.SafeFactory=e.ContractManager=void 0;var r=t(g());e.ContractManager=r.default;var n=t(X()),a=t(q());e.SafeFactory=a.default;var s=t(b());e.EthSignSignature=s.default;var i=U();Object.defineProperty(e,"standardizeSafeTransactionData",{enumerable:!0,get:function(){return i.standardizeSafeTransactionData}}),e.default=n.default}))()}}]);